- redis过期数据删除

  - 1.惰性删除，访问到key的时候判断是否过期，过期则删除

  - 2.定时扫描删除
    - redis会将设置过期时间的key放到一个独立的字典中，会定时遍历这个字典来删除到期的key。
    - Redis默认每秒进行10次过期key的扫描，每次扫描不会遍历字典中的所有key，而是按照如下策略： a.从过期字典中随机选择20个key； b.删除这20个key中已经过期的数据 c.如果过期的key的比重超过1/4则重复步骤a) 另外，为了保证过期扫描不会出现过度循环，导致线程卡死，算法增加了扫描时间上限，默认是25ms。当出现大量的key设置相同的过期时间的时候，则会出现连续扫描导致读写请求出现明显的卡顿。因此，对于一些活动系统中可能会出现大量数据过期的，应为key的过期时间设置一个随机数，不能在同一时间内过期。

  

- 淘汰策略：命令：通过redis-cli CONFIG GET maxmemory-policy查看
  - 不淘汰策略noeviction，内存不足时，能读不能写
  - 最近最少使用volatile-lru：从设置了过期时间的key中选择最近最久未访问的key
  - 根据过期时间优先volatile-ttl：从设置了过期时间的key中选择剩余时间最短的key删除
  - 随机删除volatile-random：从设置了过期时间的key中随机删除
  - 全局最近最少时间allkeys-lru：从所有key中选择最少使用的key，无论是否设置过期时间
  - 全局随机删除allkeys-random：从所有key中随机删除，不管是否设置过期时间